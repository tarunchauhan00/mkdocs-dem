<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Content Manager</title>

    <!-- Make all relative URLs root-relative -->
    <base href="/" />

    <!-- Point the CMS at its config -->
    <link rel="cms-config-url" href="/admin/config.yaml" type="text/yaml" />

    <!-- 1) Load the Netlify Identity widget -->
    <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
    <script>
      // Configure Identity to allow open sign-up
      if (window.netlifyIdentity) {
        window.netlifyIdentity.on('init', user => {
          // If no user, open the signup/login modal immediately
          if (!user) {
            window.netlifyIdentity.open('login');
          }
        });
        window.netlifyIdentity.init({ open_signup: true });
      }
    </script>

    <!-- 2) Load Netlify CMS after Identity -->
    <script src="https://unpkg.com/netlify-cms@^2.10.0/dist/netlify-cms.js"></script>
  </head>

  <body>
    <!-- Mount point for the CMS -->
    <div id="nc-root"></div>
  </body>
</html>
